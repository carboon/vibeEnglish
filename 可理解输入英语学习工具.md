作为一个拥有多年后端开发经验和计算机硕士背景的工程师，你一定知道“分而治之”是处理复杂系统的核心。

这个项目可以拆解为**媒体处理**、**AI 编排**、**语言学处理**和**前端渲染**四个核心子模块。以下是按照里程碑（Milestones）设计的研发路径：

---

## 1. 核心子模块拆解

### **A. 媒体预处理模块 (Media Processor)**

* **功能：** 本地视频加载、自动抽帧、关键帧过滤、图片压缩。
* **技术选型：** `ffmpeg.wasm` (浏览器端) 或 `OpenCV` (本地 Python 后端)。
* **核心逻辑：** 不要死板的 1s 一帧，应通过背景差异算法检测“场景变化”。

### **B. AI 多模态编排模块 (AI Orchestrator)**

* **功能：** 调用 GLM-4V-Plus 或 Qwen2-VL 接口，管理上下文。
* **技术选型：** 智谱 AI SDK 或 硅基流动 API。
* **核心逻辑：** 设计 **Sliding Window（滑动窗口）** 提示词，将前一秒的描述传给下一秒，保证文稿叙事的连贯性。

### **C. 语言学分级引擎 (Linguistic Engine)**

* **功能：** 文本清洗、CEFR 词汇分级匹配、核心词权重计算。
* **技术选型：** `Node.js/Python` + 静态词库 (JSON/SQLite)。
* **核心逻辑：** 建立分词算法，过滤掉 A1-B1 词汇，对 B2 以上词汇进行“核心度”打分。

### **D. 同步渲染与交互模块 (Sync Renderer)**

* **功能：** 视频播放器、动态字幕图层、交互式取词。
* **技术选型：** React + Tailwind CSS / Flutter。
* **核心逻辑：** 实现 `timeupdate` 监听，确保高亮词汇与视频画面的毫秒级对齐。

---

## 2. 项目里程碑 (Roadmap)

### **里程碑 1：核心验证 (PoC - Proof of Concept)**

* **目标：** 打通“图片 -> 英文描述 -> 词汇高亮”的最小路径。
* **任务：**
1. 手动选取 3-5 张视频截图。
2. 编写 Prompt 调用 GLM/Qwen API 生成一段描述文本。
3. 写一个简单的脚本，根据 CEFR 词库找出 B2 词汇。


* **交付物：** 一个命令行 demo，输入图片，输出带标记的 JSON。

### **里程碑 2：本地 Web MVP (The Functional Core)**

* **目标：** 实现本地视频在浏览器内的全流程自动化。
* **任务：**
1. 搭建 Next.js 本地站点。
2. 集成 `ffmpeg.wasm` 实现在浏览器内对本地视频进行抽帧。
3. 实现前端视频播放器与 SRT 字幕的简单同步显示。


* **交付物：** 一个可以在 localhost 运行的网页，上传本地视频后能生成基础英文稿。

### **里程碑 3：可理解性输入优化 (The Learning Value)**

* **目标：** 提升生成内容的教育价值。
* **任务：**
1. **叙事优化：** 调整 Prompt，让 AI 使用更具文学性和描述性的语言。
2. **核心词筛选：** 引入算法，从多个 B2 词汇中选出最符合语境的一个进行高亮。
3. **UI 交互：** 点击高亮词弹出 AI 解释，并在侧边栏显示完整文稿。


* **交付物：** 体验流畅的本地 Web 产品，生成的文稿读起来像“有声书”。

### **里程碑 4：多端与工程化 (The Scaling)**

* **目标：** 向移动客户端扩展，优化成本。
* **任务：**
1. **Flutter 适配：** 将 Web 逻辑迁移至 Flutter，支持安卓/iOS 直接读取本地视频。
2. **性能优化：** 引入本地缓存（如 IndexedDB 或 SQLite），避免重复请求同一视频的 API。
3. **云端同步（可选）：** 增加用户账户，允许同步学习进度。


* **交付物：** 网站 + 移动客户端，正式发布。

---

## 3. 技术难点深度提醒

* **Token 成本控制：** 600 张图片如果直接调用高阶模型，单次视频分析成本可能达到几块钱。
* *对策：* 建议里程碑 2 以后引入“预处理抽帧”，只把关键动作帧发给 AI。


* **Prompt 的稳定性：** AI 有时会输出非法格式的 JSON 导致解析失败。
* *对策：* 使用 **Pydantic** (Python) 或 **Zod** (TypeScript) 进行严格的 Schema 校验。



---

**下一步建议：**
针对**里程碑 1**，你是否需要我为你提供一个**核心 Prompt 模板**，用于让国产模型（如 GLM 或 Qwen）在生成描述的同时，按照 JSON 格式预先标注出它认为的“高级词汇”？